steps:

# Deploy Start Pinpoint Job function
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  - start-pinpoint-job
  - --gen2
  - --runtime=python311
  - --region=us-west1
  - --source=.
  - --entry-point=start_pinpoint_job
  - --trigger-http
  - --allow-unauthenticated
  - --run-service-account=chromeperf@appspot.gserviceaccount.com

# Deploy Poll Pinpoint Job Function
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  - poll-pinpoint-job
  - --gen2
  - --runtime=python311
  - --region=us-west1
  - --source=.
  - --entry-point=poll_pinpoint_job
  - --trigger-http
  - --allow-unauthenticated
  - --run-service-account=chromeperf@appspot.gserviceaccount.com
  waitFor: ['-']

# Deploy Get CABE Analysis Function
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  - get-cabe-analysis
  - --gen2
  - --runtime=python311
  - --region=us-west1
  - --source=.
  - --entry-point=get_cabe_analysis
  - --trigger-http
  - --allow-unauthenticated
  - --run-service-account=chromeperf@appspot.gserviceaccount.com
  waitFor: ['-']

# Deploy Regression Detection Function
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  - regression-detection
  - --gen2
  - --runtime=python311
  - --region=us-west1
  - --source=.
  - --entry-point=regression_detection
  - --trigger-http
  - --allow-unauthenticated
  - --run-service-account=chromeperf@appspot.gserviceaccount.com
  waitFor: ['-']

# Deploy Handler Callback Function
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  - handler-callback
  - --gen2
  - --runtime=python311
  - --region=us-west1
  - --source=.
  - --entry-point=handler_callback
  - --trigger-http
  - --allow-unauthenticated
  - --run-service-account=chromeperf@appspot.gserviceaccount.com
  waitFor: ['-']
