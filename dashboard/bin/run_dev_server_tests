#!/usr/bin/env python
# Copyright (c) 2015 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import os
import sys

if __name__ == '__main__':
  catapult_path = os.path.abspath(os.path.join(os.path.dirname(__file__),
                                 '..', '..'))
  sys.path.append(catapult_path)
  from catapult_build import run_dev_server_tests

  print os.sep
  sys.path.append(os.path.join(catapult_path, 'dashboard'))
  import dashboard_project
  project = dashboard_project.DashboardProject()
  test_relpaths = []
  for test in project.FindAllTestModuleRelPaths():
    test = test.replace(os.sep, '/')
    if '/spa/' in test:
      # Tests in spa/ are run by run_wct_tests, so don't run them here.
      continue
    test_relpaths.append(test)
  print '\n'.join(test_relpaths)

  sys.exit(run_dev_server_tests.Main(sys.argv + ['--tests=dashboard']))
