<!DOCTYPE html>
<!--
Copyright 2017 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/bower_components/google-signin/google-signin.html">
<link rel="import" href="/bower_components/iron-icons/communication-icons.html">
<link rel="import" href="/bower_components/iron-icons/editor-icons.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/paper-fab/paper-fab.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-input/paper-textarea.html">
<link rel="import" href="/bower_components/paper-toast/paper-toast.html">
<link rel="import" href="/bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="/dashboard/spa/alerts-section.html">
<link rel="import" href="/dashboard/spa/chart-section.html">
<link rel="import" href="/dashboard/spa/releasing-section.html">

<dom-module id="chromeperf-app">
  <template>
    <link rel="stylesheet" href="/dashboard/spa/chromeperf-app.css">

    <div id="nav">
      <span id="title">
        Chromeperf Dashboard <span id="title_version">v2.0!</span>
      </span>
      <span id="spacer"></span>
      <a href="https://github.com/catapult-project/catapult/tree/master/dashboard/dashboard/pinpoint"
         target="_blank"
         title="Documentation">
        <paper-icon-button icon="help"></paper-icon-button>
      </a>
      <a href="https://github.com/catapult-project/catapult/issues/new?title=[📍]+&assignees=dave-2&labels=Bisect"
         target="_blank"
         title="File a bug">
        <paper-icon-button icon="feedback"></paper-icon-button>
      </a>
      <google-signin
          client-id="62121018386-aqdfougp0ddn93knqj6g79vvn42ajmrg.apps.googleusercontent.com"
          height="short" theme="dark"
          scopes="email"
          on-google-signin-success="handleSignIn"
          on-google-signed-out="handleSignOut"></google-signin>
    </div>

    <iron-collapse id="fab_callout"
                   opened="[[isExplainingFab]]">
      <div id="fab_callout_contents">
        Add Releasing reports, Alerts, and Charts using the floating action
        buttons <iron-icon icon="add"></iron-icon> in the bottom right corner.
      </div>

      <paper-icon-button id="close"
                         icon="close"
                         on-tap="closeFabCallout_">
      </paper-icon-button>
    </iron-collapse>

    <template is="dom-repeat" items="[[sections]]" as="section">
      <div class="section_container">
        <template is="dom-if" if="[[_eq(section.type, 'chart-section')]]">
          <chart-section section-id="[[section.id]]">
          </chart-section>
        </template>

        <template is="dom-if" if="[[_eq(section.type, 'alerts-section')]]">
          <alerts-section section-id="[[section.id]]">
          </alerts-section>
        </template>

        <template is="dom-if" if="[[_eq(section.type, 'releasing-section')]]">
          <releasing-section section-id="[[section.id]]">
          </releasing-section>
        </template>
      </div>
    </template>

    <div id="fabs_spacer">&nbsp;</div>

    <div id="fabs_container">
      <paper-fab id="add_fab" icon="add" on-tap="showFabs_">
      </paper-fab>

      <div id="fabs">
        <div class="fab_label">Releasing</div>

        <paper-fab id="add_releasing"
                   mini
                   icon="communication:business"
                   on-tap="newReleasingSection_">
        </paper-fab>

        <div class="fab_label">Alerts</div>
        <paper-fab id="add_alerts"
                   mini
                   icon="add-alert"
                   on-tap="newAlertsSection_">
        </paper-fab>

        <div class="fab_label">Chart</div>
        <paper-fab id="add_chart"
                   icon="editor:show-chart"
                   on-tap="newChartSection_">
        </paper-fab>
      </div>
    </div>

    <paper-toast id="reopen_section"
                 opened="[[hasClosedSection]]">
      <paper-button on-tap="reopenClosedSection_">
        Reopen [[closedSectionType]]
      </paper-button>
    </paper-toast>
  </template>
</dom-module>

<script src="/dashboard/spa/chromeperf-app.js"></script>
