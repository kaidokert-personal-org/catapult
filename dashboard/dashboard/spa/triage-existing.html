<!DOCTYPE html>
<!--
Copyright 2018 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/dashboard/spa/element-base.html">

<dom-module id="triage-existing">
  <template>
    <style>
      :host {
        display: block;
      }

      paper-dialog {
        font-size: 12px;
        margin: 0;
        padding: 16px;
      }

      #controls {
        align-items: center;
        display: flex;
        margin: 0;
        padding: 0;
      }

      .spacer {
        flex-grow: 1;
      }

      paper-toggle-button {
        margin-right: 16px;
      }

      #table_container {
        max-height: 500px;
        overflow: auto;
        margin: 0;
        padding: 0;
      }

      table {
        border-collapse: collapse;
        margin: 16px 0;
        width: 100%;
      }

      tbody {
        border-width: 0;
      }

      tbody tr:hover {
        background: #eee;
      }

      .bug_id {
        cursor: pointer;
        font-weight: bold;
      }

      td:nth-of-type(4) {
        max-width: 500px;
      }
    </style>

    <paper-dialog
        id="dialog"
        opened="[[isOpen]]"
        horizontal-align="right"
        vertical-align="top"
        no-overlap
        on-iron-overlay-canceled="onCancel_">
      <div id="controls">
        <paper-input
            autofocus
            label="Bug Number"
            value="[[bugId]]"
            on-keyup="onIdKeyup_">
        </paper-input>

        <raised-button
            disabled="[[!isIdValid_(bugId)]]"
            on-click="onSubmit_">
          Submit
        </raised-button>

        <span class="spacer">&nbsp;</span>

        <paper-toggle-button
            checked$="[[onlyIntersectingBugs]]"
            on-change="onToggleOnlyIntersectingBugs_">
          Intersecting Bugs Only
        </paper-toggle-button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Bug #</th>
            <th>Status</th>
            <th>Owner</th>
            <th>Summary</th>
          </tr>
        </thead>

        <tbody>
          <template is="dom-repeat" items="[[filterBugs_(recentPerformanceBugs, onlyIntersectingBugs, selectedRange)]]" as="bug" index-as="bugIndex">
            <tr>
              <td class="bug_id" on-click="onRecentPerformanceBugTap_">
                [[bug.id]]
              </td>

              <td>[[bug.status]]</td>
              <td>[[bug.owner]]</td>
              <td>[[bug.summary]]</td>
            </tr>
          </template>
        </tbody>
      </table>
    </paper-dialog>
  </template>
</dom-module>
<script src="/dashboard/spa/triage-existing.js"></script>
