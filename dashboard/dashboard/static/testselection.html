<!DOCTYPE html>
<!--
Copyright 2015 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<script>
'use strict';

/**
 * This file contains TestSelection, a class for managing a set
 * of test data series to plot on one chart.
 */
const testselection = (function() {
  /**
   * @param {string} test Test path, not including master/bot.
   * @return {boolean} True if the test is "important". Note that this is
   *     different from "important" flag for data that's sent to /add_point.
   */
  const isImportant = function(test, testSuites) {
    return isChartLevel_(test) || isMonitored_(test, testSuites);
  };

  /**
   * @param {string} test Test path, not including master/bot.
   * @return {boolean} True if the test name only has two parts.
   */
  const isChartLevel_ = function(test) {
    return test.split('/').length <= 2;
  };

  /**
   * @param {string} test Test path, not including master/bot.
   * @return {boolean} True if the test name only has two parts.
   */
  const isMonitored_ = function(test, testSuites) {
    const parts = test.split('/');
    const testSuiteName = parts[0];
    const subTestPath = parts.slice(1).join('/');
    if (testSuites && testSuites[testSuiteName]) {
      const important = testSuites[testSuiteName].mon;
      if (important && important.indexOf(subTestPath) != -1) {
        return true;
      }
    }
    return false;
  };

  return {
    isImportant
  };
})();

</script>
