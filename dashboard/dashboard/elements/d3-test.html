<!DOCTYPE html>
<link rel="import" href="/tracing/core/test_utils.html">
<script src="/d3/d3.min.js"></script>

<style>
.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}
</style>

<script>
'use strict';

tr.b.unittest.testSuite(function() {
  const testOptions = {
    tearDown() {
    }
  };

  test('instantiate basic', function() {
    const container = document.createElement('div');
    container.id = 'svg-container';
    this.addHTMLOutput(container);
    const width = 600;
    const height = 400;
    const svg = d3.select('#svg-container').append('svg');
    svg.attr('width', width);
    svg.attr('height', height);
    const data = [
      {'name': 'A', 'value': 1, 'time': 10},
      {'name': 'B', 'value': 2, 'time': 20},
      {'name': 'C', 'value': 3, 'time': 30},
      {'name': 'D', 'value': 4, 'time': 40},
      {'name': 'E', 'value': 3, 'time': 50},
      {'name': 'F', 'value': 2, 'time': 60},
      {'name': 'G', 'value': 3, 'time': 70},
      {'name': 'H', 'value': 4, 'time': 80},
      {'name': 'I', 'value': 5, 'time': 90},
    ];
    const x = d3.scaleLinear().range([0, width]);
    const y = d3.scaleLinear().range([height, 0]);
    const valueline = d3.line()
        .x(function(d) { return x(d.time); })
        .y(function(d) { return y(d.value); });

    x.domain(d3.extent(data, function(d) { return d.time; }));
    y.domain([0, d3.max(data, function(d) { return d.value; })]);

    svg.append('path')
        .attr('class', 'line')
        .attr('d', valueline(data));
    this.addHTMLOutput(svg.node());
  }, testOptions);
});
</script>
