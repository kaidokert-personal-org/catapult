<!DOCTYPE html>
<!--
Copyright 2019 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/components/iron-icon/iron-icon.html">
<link rel="import" href="/components/iron-icons/iron-icons.html">
<link rel="import" href="/components/paper-button/paper-button.html">
<link rel="import" href="/elements/base-style.html">

<dom-module id="exception-details">
  <template>
    <style include="base-style">
      #exception {
        font-size: 1.0em;
        margin: 1em 0;
        white-space: pre-wrap;
      }
    </style>

    <template is="dom-if" if="[[exception]]">
      <p id="exception">[[exceptionMessage(exception)]]</p>
      <template is="dom-if" if="[[!expanded]]">
        <paper-button on-tap="onExpand">See All<iron-icon icon="add"></iron-icon></paper-button>
      </template>
      <template is="dom-if" if="[[expanded]]">
        <p id="exception">[[exceptionTraceback(exception)]]</p>
      </template>
    </template>
  </template>

  <script>
    'use strict';
    Polymer({
      is: 'exception-details',

      properties: {
        exception: {
          type: Array,
        },
        expanded: {
          type: Boolean,
          value: false,
        }
      },

      exceptionMessage(exception) {
        return exception[0];
      },

      exceptionTraceback(exception) {
        return exception[1];
      },

      onExpand() {
        this.expanded = !this.expanded;
      },
    });
  </script>
</dom-module>
