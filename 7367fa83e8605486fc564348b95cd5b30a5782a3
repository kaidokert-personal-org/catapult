{
  "comments": [
    {
      "key": {
        "uuid": "5fe1becf_a390bded",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-17T16:00:28Z",
      "side": 1,
      "message": "This is a dummy example to show how SharedState, Story and Benchmark would be implemented.",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b84fd179_0bc629a1",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1128435
      },
      "writtenOn": "2017-11-17T20:37:34Z",
      "side": 1,
      "message": "I think there is no need for this shared_state to hold the handle to browser. This only need the possible_browser object. To ensure shared_state kill of the browser, we can add s.t like KillAllChromeBrowser to android_platform API which search for all chrome pids \u0026 kill them",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02a134b5_08ed4b1d",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-20T12:24:16Z",
      "side": 1,
      "message": "We need to hold the browser to create the action_runner for RunStory.\n\nThe alternative is for the _story_ to hold the browser itself. Not sure which is better?",
      "parentUuid": "b84fd179_0bc629a1",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84aa0a6d_0459eb03",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1128435
      },
      "writtenOn": "2017-11-20T12:36:31Z",
      "side": 1,
      "message": "There is no need to create action_runner. Tab objects already created it always: https://cs.chromium.org/chromium/src/third_party/catapult/telemetry/telemetry/internal/browser/tab.py?rcl\u003d37921f135dc61021b8ced4c73375339658ac9953\u0026l\u003d35",
      "parentUuid": "02a134b5_08ed4b1d",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7afe6c1f_7176662a",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-20T12:38:02Z",
      "side": 1,
      "message": "still, we need the browser to get the tab :P",
      "parentUuid": "84aa0a6d_0459eb03",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f02971f2_00d78e10",
        "filename": "telemetry/foo_perf/benchmarks/android_go_benchmark.py",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-17T16:00:28Z",
      "side": 1,
      "message": "This is the main bit changing w.r.t. the typical shared state: we need to \"create\" the browser but do not launch it just yet. Since the story is the one responsible for deciding exactly how that happens.\n\nThe StartEnvironment wraps around the code to launch the browser: making sure that e.g. command line flags are set *before* launching the browser, and establishing a devtools connection to it afterwards.\n\nSee the docstring of that method below.\n\nHappy to hear if you have other suggestions for this interface.",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e7a0f6c_54578fd6",
        "filename": "telemetry/foo_perf/run_example.py",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-17T16:00:28Z",
      "side": 1,
      "message": "You can ignore this.\n\nThis is just a dummy copy of tools/perf/run_benchmark, so I can test the new benchmark in a single catapult CL.",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0c10bf3_692cb416",
        "filename": "telemetry/telemetry/internal/browser/browser.py",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-17T16:00:28Z",
      "side": 1,
      "message": "This is probably the most controversial change. In the past we made every effort to tie the lifetime of the Browser object and the actual browser process running on the platform.\n\nThis would allow to create the browser object but *not* start it. Also sort of defeats the purpose of separating \"possible_browser\" (before creation) and \"browser\" (after creation).\n\nNot sure what are your thoughts. Or if you can think of an alternative way to achieve this?",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50367714_95e0bd31",
        "filename": "telemetry/telemetry/internal/browser/browser.py",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1128435
      },
      "writtenOn": "2017-11-17T20:35:18Z",
      "side": 1,
      "message": "Yeah, I don\u0027t like this part. I have a trouble with understanding why we need to separate create the browser from preparing the environment for the startup. Is that because we haven\u0027t plumbed all the configurable bit of starting the browser to the browser_options object yet?",
      "parentUuid": "f0c10bf3_692cb416",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ed6068f_5d81dcac",
        "filename": "telemetry/telemetry/internal/browser/browser.py",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-20T12:24:16Z",
      "side": 1,
      "message": "The problem is that we want to give stories full control on how does the browser actually gets started. The story, however, shouldn\u0027t be concerned with setting up the environment or establishing a devtools connection afterwards. Those bits are common to all stories and rely on Telemetry-specific internal details.\n\nI created https://docs.google.com/a/google.com/document/d/1hGRbKgHbKY7GwAacq0QcCYqOPpCmlz6FeFayUyZ72FM/edit?usp\u003dsharing to discuss the problem and possible solutions.",
      "parentUuid": "50367714_95e0bd31",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34567be4_e5eeb551",
        "filename": "telemetry/telemetry/internal/browser/browser.py",
        "patchSetId": 1
      },
      "lineNbr": 223,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2017-11-17T16:00:28Z",
      "side": 1,
      "message": "This would also need to be implemented for non-android browsers. (Although we might not use it there, it does make a bit of sense to have something similar there: i.e. allow the browser to be created through other means, and then find and connect to the browser.)",
      "revId": "7367fa83e8605486fc564348b95cd5b30a5782a3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}