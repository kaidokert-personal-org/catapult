{
  "comments": [
    {
      "key": {
        "uuid": "1d483ffd_85bdcf27",
        "filename": "telemetry/telemetry/testing/serially_executed_browser_test_case.py",
        "patchSetId": 4
      },
      "lineNbr": 219,
      "author": {
        "id": 1149061
      },
      "writtenOn": "2019-06-03T23:45:21Z",
      "side": 1,
      "message": "This description is verbose but yet confusing. Maybe something like\n\n\"\"\"Add a link to the test results.\n\nThis link can be displayed in Milo or other UI.\n\"\"\"\n\nimprovements:\n1. python style is that the first line of a docstring should be a single-line summary. I know other code in here doesn\u0027t follow that, but I would prefer we move to that.\n2. \u0027dictionary\u0027 is an implementation detail of test results. Let\u0027s say that typ reimplements test results to use LUCI Test Results format or any other format instead of JSON Test Results v3 (which it currently uses). In that case, the underlying implementation may no longer be a dictionary.\n3. Documentation should say \"why?\" instead of just \"what?\" since you can figure out \"what?\" by reading the nearby code, but it is usually much harder to figure out why. So that\u0027s why \"This link can be displayed in Milo or other UI.\" is useful.",
      "range": {
        "startLine": 218,
        "startChar": 7,
        "endLine": 219,
        "endChar": 56
      },
      "revId": "a2f6152a2d0e656283729c41de073fc3efb41fc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b23abaf7_7b98746b",
        "filename": "third_party/typ/typ/json_results.py",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1311766
      },
      "writtenOn": "2019-06-04T00:02:40Z",
      "side": 1,
      "message": "Will links be different for each swarming bot?",
      "revId": "a2f6152a2d0e656283729c41de073fc3efb41fc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27a84224_52d5f078",
        "filename": "third_party/typ/typ/json_results.py",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-06-04T00:08:27Z",
      "side": 1,
      "message": "There isn\u0027t necessarily a guarantee of that, but the one use of this that\u0027s being added automatically prepends the test name to the link description before passing it to typ. Since AFAIK the same test should not be running multiple times on different shards from a single test invocation, that should mean that we don\u0027t have to worry about the same link description being generated on multiple bots.",
      "parentUuid": "b23abaf7_7b98746b",
      "revId": "a2f6152a2d0e656283729c41de073fc3efb41fc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e605395_5a217738",
        "filename": "third_party/typ/typ/json_results.py",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1311766
      },
      "writtenOn": "2019-06-04T00:20:40Z",
      "side": 1,
      "message": "I believe that adding new fields to json results by adding arguments to make_full_results is not the right way to go. I believe that you should add the links list to the metadata dictionary. This would make metadata dictionaries different across swarming bots. Therefore you would need to modify results_merge.py script which can be found in the link below.\n\nhttps://cs.chromium.org/chromium/src/testing/merge_scripts/results_merger.py?g\u003d0\n\nYou would need to move the metadata key from the OPTIONAL_MATCHING dictionary to the OPTIONAL_IGNORED field. You would also need to add the links key to the OPTIONAL_IGNORED dictionary if you want the links to be a top level field.",
      "parentUuid": "27a84224_52d5f078",
      "revId": "a2f6152a2d0e656283729c41de073fc3efb41fc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75278deb_a4e5d6db",
        "filename": "third_party/typ/typ/json_results.py",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-06-04T00:29:34Z",
      "side": 1,
      "message": "According to https://cs.chromium.org/chromium/build/scripts/slave/recipe_modules/chromium_swarming/api.py?q\u003dchromium_swarming/api.py\u0026sq\u003dpackage:chromium\u0026dr\u0026l\u003d535, the \"links\" field should be a top level field. Thus, I don\u0027t think we can just include the links in the metadata dict.\n\nIf it\u0027s preferable to adding new arguments to make_full_results, I could add the links to the metadata dict and special case that key to be copied as a top level field (and removed from the metadata dict) in make_full_results.",
      "parentUuid": "1e605395_5a217738",
      "revId": "a2f6152a2d0e656283729c41de073fc3efb41fc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}