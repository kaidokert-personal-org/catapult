{
  "comments": [
    {
      "key": {
        "uuid": "1a26fc32_1436c066",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1128909
      },
      "writtenOn": "2018-03-19T12:18:58Z",
      "side": 1,
      "message": "My two cents is that this CL would benefit from being split up and submitted in smaller chunks. The actual delta isn\u0027t huge, but the number of meaty lines of code is really high for a single CL. At least in Telemetry (I defer to jbudorick@ for the devil stuff), all of the stuff that isn\u0027t just boilerplate plumbing needs tests, too, especially the android_simpleperf_profiler. (As someone who maintains the CPU profiler, I can tell you how valuable the tests have been in understanding what can go wrong when running a profiler.)\n\nFor an example of what these tests might look like for a tracing agent, see https://cs.chromium.org/chromium/src/third_party/catapult/telemetry/telemetry/internal/platform/tracing_agent/cpu_tracing_agent_unittest.py?type\u003dcs\u0026q\u003dcpu_tracing_\u0026sq\u003dpackage:chromium\u0026l\u003d1",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "400a6801_023825b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 1128909
      },
      "writtenOn": "2018-03-19T12:18:58Z",
      "side": 1,
      "message": "My vote for the subject line of this CL is \"Add simpleperf tracing agent to Telemetry\" instead of \"Profiling enhancements\"",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4834b5f7_f8cf636d",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 1109,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "Also not super sure whether we want to expose this method at the device_utils level. Since the method here is really just a pass-through, and since I would consider this an \"advanced\" option, maybe clients should really do, e.g.:\n\np \u003d device.adb.StartShell(...)",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10b707e2_cf2feb32",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 1109,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4834b5f7_f8cf636d",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6afb2e45_d6e98db5",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 1112,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "I\u0027m still not sure about this method  (see previous comment and also below). But, if we decide to keep it, let\u0027s remove that check_return option. If clients really want to ignore (or do something special) with the error, they should catch the exception themselves.",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b29617f7_cd01b375",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 1112,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6afb2e45_d6e98db5",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7534e065_77d39c7b",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 2378,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "Just wondering, since we\u0027re doing something like this for _GetPsOutput and now here; could it be possible to factor out and generalize the common code, e.g. a \"_GrepRunShellCommandOutput\" ?",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1041f39_15c085a6",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 2378,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "In my opinion, there\u0027s not enough code duplication to merit factoring this out, but I\u0027ll defer to your judgement.",
      "parentUuid": "7534e065_77d39c7b",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "064e7d8f_f224bd84",
        "filename": "devil/devil/android/device_utils.py",
        "patchSetId": 5
      },
      "lineNbr": 2391,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "I don\u0027t think we should provide this method. See my comments below in android_simpleperf_profiler.py",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aec285b9_3b3e2fbc",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 483,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "Add a docstring here. In particular document the fact that this returns a Popen object for the adb process (on the host) which is running the command (on the device).",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc0c98ac_014f8a60",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 483,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aec285b9_3b3e2fbc",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "326ea2b9_3d03a6ff",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 487,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "As I hinted earlier, I don\u0027t know if this belongs here. To start, note the implementation of \nthis method only barely depends on \"self\".\n\nI saw John\u0027s comment on having code for checking the exit status on communicate(). I believe however I would rather declare this an \"advanced feature\", just let the StartShell method return the Popen object, and pass the responsibility of properly dealing with that object to the callers.\n\nWe could try to create some DevicePopen object, but I believe that will just increase the complexity with very little pay off.\n\nBut I\u0027m not sure. What are your thoughts?",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07284177_d70cfaa4",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 487,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "I tend to agree with you; subprocess is a well-known python standard library module, and consumers of adb_wrapper should be able to use it without unnecessary intermediate layers of cheese.\n\nRemoved.",
      "parentUuid": "326ea2b9_3d03a6ff",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1759ae86_c287a8fa",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 487,
      "author": {
        "id": 1181690
      },
      "writtenOn": "2018-03-20T18:38:17Z",
      "side": 1,
      "message": "I think there\u0027s room to disagree with an idea without resorting to calling it \"unnecessary intermediate layers of cheese.\"",
      "parentUuid": "07284177_d70cfaa4",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10a0f8d8_4f894b5e",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 487,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T19:08:08Z",
      "side": 1,
      "message": "I meant no offense; I was referring to code that I wrote myself.",
      "parentUuid": "1759ae86_c287a8fa",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "542ad30a_d551fcf5",
        "filename": "devil/devil/android/sdk/adb_wrapper.py",
        "patchSetId": 5
      },
      "lineNbr": 487,
      "author": {
        "id": 1181690
      },
      "writtenOn": "2018-03-20T19:10:28Z",
      "side": 1,
      "message": "Ah, ok. I read it as referring to the idea; just a misunderstanding, then.\n\nIn any event, I\u0027m ok with StartShell returning the Popen object.",
      "parentUuid": "10a0f8d8_4f894b5e",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dca4ff4f_fb35664e",
        "filename": "telemetry/telemetry/internal/platform/profiler/android_simpleperf_profiler.py",
        "patchSetId": 5
      },
      "lineNbr": 113,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-19T12:14:52Z",
      "side": 1,
      "message": "Sounds like you don\u0027t want a GetDumpsys method, but a GetPackageArch (?) or something?\n\nIdeally methods in device_utils should not return things which clients then need to parse. Let\u0027s do all the parsing work there.",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c01690f_3ab8170b",
        "filename": "telemetry/telemetry/internal/platform/profiler/android_simpleperf_profiler.py",
        "patchSetId": 5
      },
      "lineNbr": 113,
      "author": {
        "id": 1001706
      },
      "writtenOn": "2018-03-20T18:14:21Z",
      "side": 1,
      "message": "I added GetPackageArchitecture, but I left _GetDumpsysOutput intact.  Seems like a useful method, which should be used in a few more places in device_utils.",
      "parentUuid": "dca4ff4f_fb35664e",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a46d9d4_39dc03be",
        "filename": "telemetry/telemetry/internal/platform/profiler/android_simpleperf_profiler.py",
        "patchSetId": 5
      },
      "lineNbr": 113,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2018-03-21T09:37:36Z",
      "side": 1,
      "message": "Yup. That sounds very reasonable.",
      "parentUuid": "4c01690f_3ab8170b",
      "revId": "04b6fa48eb27f3482073f5c6851531a3fdc6561d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}