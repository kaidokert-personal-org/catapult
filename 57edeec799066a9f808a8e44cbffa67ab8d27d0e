{
  "comments": [
    {
      "key": {
        "uuid": "df67ba19_0eb44d33",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 8
      },
      "lineNbr": 25,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-21T11:23:34Z",
      "side": 1,
      "message": "Lets add a comment here that our operations on these dicts are thread-safe, and why :)\n\nAFAIU creating/accessing defaultdict entries is thread-safe as long as the value type, i.e. dict in this case, is a built-in type. And every value is essentially a thread-local dict that\u0027s only accessed/modified by a single thread, so our operations on this are thread-safe, too.\n\nAlternatively, you could use threading.Local to make all this more explicit.",
      "range": {
        "startLine": 25,
        "startChar": 30,
        "endLine": 25,
        "endChar": 41
      },
      "revId": "57edeec799066a9f808a8e44cbffa67ab8d27d0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62041200_ea5bb0ac",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-21T11:23:34Z",
      "side": 1,
      "message": "We\u0027ll need to think about threading here, i.e. Locks, I guess?",
      "revId": "57edeec799066a9f808a8e44cbffa67ab8d27d0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e83e05d_a504dec8",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:37:51Z",
      "side": 1,
      "message": "I think functions in this file being not thread safe is ok, since they are only called from log.py methods, which all use one global lock.\n\nI can add a comment about that, for other possible users of these functions.",
      "parentUuid": "62041200_ea5bb0ac",
      "revId": "57edeec799066a9f808a8e44cbffa67ab8d27d0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5492d2dc_2348a9c1",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-21T11:42:07Z",
      "side": 1,
      "message": "Ah, great :) Yeah, let\u0027s add a comment about that :)",
      "parentUuid": "9e83e05d_a504dec8",
      "revId": "57edeec799066a9f808a8e44cbffa67ab8d27d0e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}