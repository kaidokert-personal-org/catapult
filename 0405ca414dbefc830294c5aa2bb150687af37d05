{
  "comments": [
    {
      "key": {
        "uuid": "eaf35f5e_066b6753",
        "filename": "dashboard/dashboard/api/alerts.py",
        "patchSetId": 1
      },
      "lineNbr": 275,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2018-06-13T21:44:17Z",
      "side": 1,
      "message": "IIUC, there are 3 cases handled here:\n\n1. The user didn\u0027t provide any credentials at all.\n2. The user did provide some credentials, but they are invalid.\n3. The user provided valid credentials, but there was some transient error when checking them.\n\nThe should be handled differently:\n\n1. Proceed anonymously.\n2. Return HTTP 401.\n3. Return HTTP 500.\n\nCurrently they all result in \"proceed anonymously\". This can lead to some confusing stuff, like some small random percentage of requests from a signed in user succeeding, but inexplicably returning incomplete data (because the backend had transient errors when checking the token).",
      "range": {
        "startLine": 275,
        "startChar": 12,
        "endLine": 275,
        "endChar": 58
      },
      "revId": "0405ca414dbefc830294c5aa2bb150687af37d05",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2f1f56e_1d9bd8c1",
        "filename": "dashboard/dashboard/api/alerts.py",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2018-06-13T21:44:17Z",
      "side": 1,
      "message": "Where is this checked?",
      "range": {
        "startLine": 277,
        "startChar": 46,
        "endLine": 278,
        "endChar": 41
      },
      "revId": "0405ca414dbefc830294c5aa2bb150687af37d05",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8e06086_9a55a5b3",
        "filename": "dashboard/dashboard/api/alerts.py",
        "patchSetId": 1
      },
      "lineNbr": 370,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2018-06-13T21:44:17Z",
      "side": 1,
      "message": "Assertion errors must never ever happen in a correctly constructed program :( If they do happen, it is better for the handler to crash loudly with HTTP 500 and a stack trace in the logs. Because a failed assertion is a bug in the logic that should be fixed.\n\nAt least that\u0027s how assertion are supposed to be used. I\u0027m not familiar with catapult code, maybe you\u0027ve repurposed them for input validation or something (which I believe is wrong, but my opinion doesn\u0027t matter in this code base).",
      "range": {
        "startLine": 370,
        "startChar": 12,
        "endLine": 370,
        "endChar": 26
      },
      "revId": "0405ca414dbefc830294c5aa2bb150687af37d05",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}