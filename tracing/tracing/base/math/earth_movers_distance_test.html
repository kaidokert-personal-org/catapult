<!DOCTYPE html>
<!--
Copyright (c) 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<link rel="import" href="/tracing/base/math/earth_movers_distance.html">

<script>
'use strict';

tr.b.unittest.testSuite(function() {
  test('earthMoversDistance', function() {
    let firstHistogram = [1, 2, 3];
    let secondHistogram = [3, 1, 1, 3];
    try {
      tr.b.math.earthMoversDistance(firstHistogram, secondHistogram);
    } catch (err) {
      assert.strictEqual('Histograms have a different number of bins.',
          err.message);
    }


    firstHistogram = [1, 2, 3, 1];
    secondHistogram = [3, 1, 1, 3];
    try {
      tr.b.math.earthMoversDistance(firstHistogram, secondHistogram);
    } catch (err) {
      assert.strictEqual('The histograms\' sizes don\'t match.',
          err.message);
    }

    firstHistogram = [3, 1, 1, 3];
    secondHistogram = [3, 1, 1, 3];
    assert.strictEqual(0,
        tr.b.math.earthMoversDistance(firstHistogram, secondHistogram));

    firstHistogram = [];
    secondHistogram = [];
    assert.strictEqual(0,
        tr.b.math.earthMoversDistance(firstHistogram, secondHistogram));

    firstHistogram = [1, 2, 3, 2];
    secondHistogram = [3, 1, 1, 3];
    assert.strictEqual(4,
        tr.b.math.earthMoversDistance(firstHistogram, secondHistogram));
  });
});
</script>
