#!/usr/bin/env python
# Copyright 2018 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import argparse
import os
import pandas
import sys


def main():
  parser = argparse.ArgumentParser()
  parser.add_argument(
      '--input', '-i', help='csv file containing the results from get-csv.')
  parser.add_argument('--output', '-o', help='csv file for the summary output.')
  args = parser.parse_args()
  if not args.input or not args.output:
    sys.stderr.write('Must provide both input and output files.\n')
    return

  df = pandas.read_csv(args.input)
  sys.stderr.write('%s\n' % df)
  df.groupby(['name', 'change'])['mean'].mean().unstack().to_csv(args.output)

if __name__ == '__main__':
  sys.exit(main())
