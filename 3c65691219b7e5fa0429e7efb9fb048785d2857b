{
  "comments": [
    {
      "key": {
        "uuid": "eebf05e2_163fb66e",
        "filename": "telemetry/telemetry/internal/results/story_run.py",
        "patchSetId": 1
      },
      "lineNbr": 111,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2019-06-17T13:03:28Z",
      "side": 1,
      "message": "This is exposing the inner list which callers might accidentally mutate. But I also think it would be nice if we force clients to only be able to set the tbm metrics in a single place once. So I would suggest.\n\n- replace AddTbmMetric with SetTbmMetrics(metrics) where you set self._tbm_metrics \u003d tuple(metrics), and complain if metrics were already set.\n- let this property as is, callers now get a tuple they cannot change. :)",
      "revId": "3c65691219b7e5fa0429e7efb9fb048785d2857b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "732c78ff_52d80170",
        "filename": "telemetry/telemetry/internal/results/story_run.py",
        "patchSetId": 1
      },
      "lineNbr": 111,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-06-17T13:41:07Z",
      "side": 1,
      "message": "Allowing to set metrics only once sgtm.\n\nAs for making it a tuple, there\u0027s an explicit assert later on [1] that it is a list. Converting it to a tuple and then back to a list seems pretty strange to me, to be honest, so perhaps we can leave it a list?\n\n[1] https://cs.chromium.org/chromium/src/third_party/catapult/tracing/tracing/metrics/metric_runner.py?l\u003d29",
      "parentUuid": "eebf05e2_163fb66e",
      "revId": "3c65691219b7e5fa0429e7efb9fb048785d2857b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c60c81f_32fed7f0",
        "filename": "telemetry/telemetry/internal/results/story_run.py",
        "patchSetId": 1
      },
      "lineNbr": 111,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2019-06-17T13:51:55Z",
      "side": 1,
      "message": ":( but why?\n\nAnyway, yeah, it might be a bit strange, but I still think it makes more sense to keep this as a tuple here and convert back to list in the call at page_test_results.py.\n\nLet\u0027s reduce the number of places where things can go wrong. (Also you could tweak https://cs.chromium.org/chromium/src/third_party/catapult/telemetry/telemetry/web_perf/timeline_based_measurement.py?rcl\u003d07b0ead06a3beba8177e0c0d5bd16b5621827178\u0026l\u003d103 to already return a tuple; as that API has the same problem.)",
      "parentUuid": "732c78ff_52d80170",
      "revId": "3c65691219b7e5fa0429e7efb9fb048785d2857b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}