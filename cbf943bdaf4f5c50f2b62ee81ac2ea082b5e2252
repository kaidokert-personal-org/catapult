{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "060a5661_13950a8c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1137015
      },
      "writtenOn": "2023-09-01T16:09:26Z",
      "side": 1,
      "message": "PTAL\n\nI\u0027m not very familiar with Catapult so please advise if this is the right location to add the switch.\n\nAlso, I\u0027m curious if there is an actual use case for backgrounding renderers? I can easily imagine a test that creates 100 tabs but only measure the performance of the active tab.",
      "revId": "cbf943bdaf4f5c50f2b62ee81ac2ea082b5e2252",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ddb05a4_82869b1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2023-09-01T17:09:35Z",
      "side": 1,
      "message": "This is the correct place for this, but I\u0027m not sure if it\u0027s correct to add this flag to Telemetry at all. While it\u0027s certainly useful for certain tests, like you mentioned, there might be performance tests that rely on Chrome\u0027s normal tab backgrounding behavior. If that\u0027s the case, it would be better to just add this flag as an extra browser arg to the tests that actually need it.\n\n+johnchen who I believe is more familiar with the perf side of things for comment.",
      "parentUuid": "060a5661_13950a8c",
      "revId": "cbf943bdaf4f5c50f2b62ee81ac2ea082b5e2252",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8ee1c16_05c63b25",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2023-09-01T17:14:49Z",
      "side": 1,
      "message": "I agree with Brian\u0027s concern. This seems undesirable for perf tests, as it makes Chrome performs differently in the lab vs on user\u0027s machine.\n\nIt\u0027s better to let tests that need the switch to add it.",
      "parentUuid": "8ddb05a4_82869b1f",
      "revId": "cbf943bdaf4f5c50f2b62ee81ac2ea082b5e2252",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54077546_a0da3b99",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1137015
      },
      "writtenOn": "2023-09-01T17:28:38Z",
      "side": 1,
      "message": "Sounds good to me\n\nThe reason for adding the switch now is that on MacOS only, we do not background renderers.\n\nThe feature is behind an experimental flag that is not enabled. But since the flag was enabled in the fieldtrial_testing_config.json file, I think the perf tests were running with the backgrounding of renderers enabled.\n\nSo when I tried to land a change to the renderer backgrounding feature on Mac, I significantly regressed a number of perf tests. The change (https://chromium-review.googlesource.com/c/chromium/src/+/4788107) significantly increases the throttling done to background renderers. See the attached bug for which test regressed..\n\nSo I guess I should look at the regressed tests on a case-by-case basis to see if they should have the flag enabled? I\u0027m a bit worried about having to look at a large number of tests when I try to enable this experimental flag, especially since the Chrome we ship on Mac today does not have renderer backgrounding. (Of course other OSes have it enabled).",
      "parentUuid": "e8ee1c16_05c63b25",
      "revId": "cbf943bdaf4f5c50f2b62ee81ac2ea082b5e2252",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75f066e8_9472b2e2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2023-09-01T17:41:34Z",
      "side": 1,
      "message": "In general, I\u0027m concerned about using any flags that affects performance while running perf tests, as it makes the test results not real.\n\nFor this particular case, you mentioned that the feature is behind an experimental flag, so there is a chance it will eventually be enabled on real users. If your change significantly regressed some perf tests, it will eventually affect users when this feature passes the experimental stage and is shipped to users. So it shouldn\u0027t be hidden by a command-line switch that real users will never use.",
      "parentUuid": "54077546_a0da3b99",
      "revId": "cbf943bdaf4f5c50f2b62ee81ac2ea082b5e2252",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}