{
  "comments": [
    {
      "key": {
        "uuid": "92d4554f_0a3af36b",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T20:35:11Z",
      "side": 1,
      "message": "Why use taskqueue.Task instead of deferred.defer?",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b58a82ab_f7e4866e",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T21:44:44Z",
      "side": 1,
      "message": "Mostly just consistency within the file. Got a preference?",
      "parentUuid": "92d4554f_0a3af36b",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69a31891_c09c45a7",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T22:22:44Z",
      "side": 1,
      "message": "A deferrable function seems simpler than a RequestHandler in lines of code, and you don\u0027t need to register deferrable functions in dispatcher.py. My 2c :-)",
      "parentUuid": "b58a82ab_f7e4866e",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "278a9939_1a39e2c5",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T22:27:22Z",
      "side": 1,
      "message": "True, I\u0027ll change it.",
      "parentUuid": "69a31891_c09c45a7",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a394ac04_8f7c23cb",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 71,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-20T16:00:43Z",
      "side": 1,
      "message": "Spoke offline, but just reiterating here. Difficult to find the deferred tasks in the logs, keeping this as a handler instead since a search for /add_histograms gets them all.",
      "parentUuid": "278a9939_1a39e2c5",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01947d49_ddff98c4",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T20:35:11Z",
      "side": 1,
      "message": "Do you want to wait for ProcessHistogramSet to succeed before deleting?",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d84832c6_080b8c2c",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T21:44:44Z",
      "side": 1,
      "message": "Kinda went back and forth on that a bit, didn\u0027t want it to fail somehow and then try again over and over, although that\u0027s *probably* fine in that it will probably just overwrite existing data (I think). I\u0027m thinking if ProcessHistogramSet fails once, it will very likely fail every time since chances are the data is malformed, or we went over the 10 min limit or something.",
      "parentUuid": "01947d49_ddff98c4",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89a3bfbf_cd6a1e49",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T22:22:44Z",
      "side": 1,
      "message": "I thought that there were situations where ProcessHistogramSet could fail in a way that would cause uploaders to retry and maybe succeed. If add_histograms defers all processing in a way that uploaders can\u0027t retry, then it seems necessary for AddHistogramsProcessHandler to take over responsibility for retrying.",
      "parentUuid": "d84832c6_080b8c2c",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2224bc62_5cee12bd",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 88,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T22:27:22Z",
      "side": 1,
      "message": "afaik the only potentially recoverable error would be something that\u0027s borderline 60s, sometime\u0027s it\u0027ll pass and sometimes it won\u0027t.\n\nThe client can retry in a number of sort of recoverable cases, like their token expired and we rejected, etc. but those all happen outside ProcessHistogramSet",
      "parentUuid": "89a3bfbf_cd6a1e49",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "335af548_849b2388",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 96,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T20:35:11Z",
      "side": 1,
      "message": "This handler runs on the taskqueue, right? So what does the taskqueue do with responses like this?",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a530a8c_6a6aca0d",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 96,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T21:44:44Z",
      "side": 1,
      "message": "Nothing, was only preserved so that I wouldn\u0027t have to change the tests significantly. Down the line I figured it could write this to datastore so that we could link uploads with errors easily, but for now that\u0027s the only reason.",
      "parentUuid": "335af548_849b2388",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "626e01db_5fd10dec",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 96,
      "author": {
        "id": 1115874
      },
      "writtenOn": "2018-08-17T22:22:44Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6a530a8c_6a6aca0d",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a9453f6_289e52b1",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 1116849
      },
      "writtenOn": "2018-08-17T20:28:40Z",
      "side": 1,
      "message": "Can we not do this unless necessary",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfd6561c_2a7db9b4",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T21:44:44Z",
      "side": 1,
      "message": "Kinda wanna still use zlib to verify the data, removed the unnecessary re-compress",
      "parentUuid": "5a9453f6_289e52b1",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d2e05ea_be225c92",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 131,
      "author": {
        "id": 1116849
      },
      "writtenOn": "2018-08-17T20:28:40Z",
      "side": 1,
      "message": "/add_histograms/process",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c8f1915_dd1cf914",
        "filename": "dashboard/dashboard/add_histograms.py",
        "patchSetId": 6
      },
      "lineNbr": 131,
      "author": {
        "id": 1116018
      },
      "writtenOn": "2018-08-17T21:44:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2d2e05ea_be225c92",
      "revId": "cae53ac29e3920e01fc023207c64ae18c48832e2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}