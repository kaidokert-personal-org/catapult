{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a86b00c8_e409df43",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2021-03-03T21:46:46Z",
      "side": 1,
      "message": "Richard: Please check that ANDROID_TRICHROME_BUNDLE setting includes the right bundle and library APK.\n\nWenbin: Please check the script code.\n\nThanks!",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2305e3ac_66f64d02",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1109505
      },
      "writtenOn": "2021-03-03T21:18:17Z",
      "side": 1,
      "message": "I\u0027m not familiar with this script but it looks somewhat weird that the additional APK is a path when the other APK is what looks like a build target name? The build target for this is trichrome_library_google_apk if that helps?",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b10d5bfd_f60caaab",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2021-03-03T21:28:53Z",
      "side": 1,
      "message": "This script is responsible for installing the APKs onto device, after the build is already done. So both apk_name and additional_apk_name are filenames in the build output. For bundles, apk_name is actually a script placed in out/Release/bin directory by the build, and it has the same name as the build target. We have some algorithm to find apk_name, so it doesn\u0027t require path, but additional_apk_name is assumed to be in the same location as apk_name, unless a path is given. In this case, trichrome_chrome_google_bundle is in bin, while TrichromeLibraryGoogle.apk is in apks, so a path is needed for the latter.",
      "parentUuid": "2305e3ac_66f64d02",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9afe362c_94a0b572",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1109505
      },
      "writtenOn": "2021-03-03T22:05:21Z",
      "side": 1,
      "message": "If you\u0027re using the install script in out/foo/bin then it should already take care of installing the library dependency when installing the chrome/webview bundle without having to do anything..",
      "parentUuid": "b10d5bfd_f60caaab",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "122555b8_4fb343cd",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2021-03-03T22:28:15Z",
      "side": 1,
      "message": "The code doesn\u0027t use the install script to do the actual installation. We use it to extract APKs (https://source.chromium.org/chromium/chromium/src/+/master:third_party/catapult/devil/devil/android/apk_helper.py;l\u003d594), and then install those APKs. Not sure why it was written that way -- it dated before my time. Might worth some investigation in the future, but that would be for the future.\n\nPinpoint job showed that install fails without explicitly specifying additional_apk_name\u003d\u0027../apks/TrichromeLibraryGoogle.apk\u0027.",
      "parentUuid": "9afe362c_94a0b572",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe13f915_a40f8524",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1109505
      },
      "writtenOn": "2021-03-03T22:32:03Z",
      "side": 1,
      "message": "Ah, ok; probably this was just added on when bundle support came along to avoid having to teach it how to invoke bundletool and it previously didn\u0027t care about the wrapper scripts at all. So yeah probably it should use the wrapper scripts to do the actual installations instead of doing it itself, but that\u0027s a different change.",
      "parentUuid": "122555b8_4fb343cd",
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57915065_0abd376c",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1373330
      },
      "writtenOn": "2021-03-03T23:48:02Z",
      "side": 1,
      "message": "Added a comment in crrev.com/c/2730513 about handling relative path.",
      "range": {
        "startLine": 383,
        "startChar": 25,
        "endLine": 383,
        "endChar": 28
      },
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ee6b67a_d3c88bb6",
        "filename": "telemetry/telemetry/internal/backends/android_browser_backend_settings.py",
        "patchSetId": 2
      },
      "lineNbr": 383,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2021-03-04T02:30:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "57915065_0abd376c",
      "range": {
        "startLine": 383,
        "startChar": 25,
        "endLine": 383,
        "endChar": 28
      },
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef83e871_f62e1b15",
        "filename": "telemetry/telemetry/internal/backends/chrome/android_browser_finder.py",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1373330
      },
      "writtenOn": "2021-03-03T23:48:02Z",
      "side": 1,
      "message": "Is it possible that requires_embedder is False but webview_embedder_apk exist? It looks to me that the has_additional_apk is only for triggering FindSupportApks.",
      "range": {
        "startLine": 109,
        "startChar": 8,
        "endLine": 109,
        "endChar": 50
      },
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc4c8732_bc688630",
        "filename": "telemetry/telemetry/internal/backends/chrome/android_browser_finder.py",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1181219
      },
      "writtenOn": "2021-03-04T02:30:54Z",
      "side": 1,
      "message": "Users shouldn\u0027t specify webview_embedder_apk if requires_embedder is False. To handle this correctly, we\u0027ll need to refactor FindSupportApks, since currently what it returns can include embedder and/or additional APKs, and no reliable way to separate the two. I think that\u0027s a technical debt for the future.",
      "parentUuid": "ef83e871_f62e1b15",
      "range": {
        "startLine": 109,
        "startChar": 8,
        "endLine": 109,
        "endChar": 50
      },
      "revId": "24441311f6e4d989345be1a4bd2149238475ad6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}