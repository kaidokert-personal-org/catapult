{
  "comments": [
    {
      "key": {
        "uuid": "67333a19_0e978d26",
        "filename": "catapult_build/.vpython",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2019-03-21T10:35:02Z",
      "side": 1,
      "message": "I don\u0027t think we can land this :( / The real solution is blocked by crbug.com/944078\n\nBut maybe we can start by moving this .vpython config to catapult/common (where py_trace_event lives), and add some tests there (to be picked up by catapult/common/bin/run_tests) showing that the new proto output format works.",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48ff2bec_556f7a46",
        "filename": "catapult_build/.vpython",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Yeah, this CL was not going to be landed as is anyway. I placed .vpython here to run CQ checks (they run catapult_build/fetch_telemetry_deps_and_run_tests script).\n\nPerhaps we should wait for the solution of crbug.com/944078 and then decide where the proper location of this file is.",
      "parentUuid": "67333a19_0e978d26",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84b1a166_b6c802a7",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2019-03-21T10:35:02Z",
      "side": 1,
      "message": "nit: Args style.",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c83b03e4_3373954c",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "84b1a166_b6c802a7",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5225240_80f6ad2b",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "maybe we should switch the extension for proto traces",
      "range": {
        "startLine": 80,
        "startChar": 24,
        "endLine": 80,
        "endChar": 28
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d57b0cd_8ef88a7f",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c5225240_80f6ad2b",
      "range": {
        "startLine": 80,
        "startChar": 24,
        "endLine": 80,
        "endChar": 28
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c5ae3b6_0a99e494",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "Are there multiple threads? If so, we need to track separate interning indexes for each thread and use different trusted_packet_sequence_id values per thread.",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d02c1c39_a8f6cff9",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/log.py",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c5ae3b6_0a99e494",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3183868b_ed8f1a45",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_pb2.py",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "I\u0027m wondering whether we can we check in the .proto file instead and run the compiler as part of building or checking out the code.. How do we update this otherwise?",
      "range": {
        "startLine": 1,
        "startChar": 2,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c214037_f77a9266",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "Sounds good, let\u0027s do it! :)",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 43
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47e0be8d_503850c2",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c214037_f77a9266",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 43
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82906dbe_ea36233d",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 19,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "nit: remove whitespace before eol",
      "range": {
        "startLine": 19,
        "startChar": 16,
        "endLine": 19,
        "endChar": 17
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d1d09e5_8d35381b",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 19,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82906dbe_ea36233d",
      "range": {
        "startLine": 19,
        "startChar": 16,
        "endLine": 19,
        "endChar": 17
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ca6163c_5013e3be",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "nit: remove",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e8bac3a_76bfae2e",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ca6163c_5013e3be",
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "637f4615_8353b18b",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "nit: TODO(khokhlov)\n\nalso, do we know where the large tid comes from? :)",
      "range": {
        "startLine": 51,
        "startChar": 4,
        "endLine": 51,
        "endChar": 9
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02b9e49c_7db16987",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "It appears that there\u0027s no platform-independent way to identify threads (on linux they have pids just like processes, but on other platforms they don\u0027t). So python threading library has its own thread identifier.\n\nActually, not much is said about it in the docs: https://docs.python.org/2/library/threading.html#threading.Thread.ident\nOnly that it is a non-zero integer.",
      "parentUuid": "637f4615_8353b18b",
      "range": {
        "startLine": 51,
        "startChar": 4,
        "endLine": 51,
        "endChar": 9
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c15850f7_1bb68fb8",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "thread_descriptor_packet.trusted_packet_sequence_id needs a value (you could use a constant, e.g. max(uint32) assuming there\u0027s only ever one thread writing).\n\nthread_descriptor_packet.incremental_state_cleared should be set to true (for the very first packet written per sequence, which I assume is this thread descriptor one).",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 52,
        "endChar": 26
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e408c7b5_041a0ea0",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c15850f7_1bb68fb8",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 52,
        "endChar": 26
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ece06c96_cb037a7a",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "TODO(khokhlov)\n\nkey/value args should be encoded as DebugAnnotations in the proto, at least initially (fine to leave as TODO for now though). Later we\u0027d want to convert those args that metrics depend on into explicit (typed) event arguments in the proto.",
      "range": {
        "startLine": 56,
        "startChar": 13,
        "endLine": 56,
        "endChar": 18
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "177ed423_83152dce",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ece06c96_cb037a7a",
      "range": {
        "startLine": 56,
        "startChar": 13,
        "endLine": 56,
        "endChar": 18
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cadbae13_3dd4edc6",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "We need to set packet.trusted_packet_sequence_id as well here.",
      "range": {
        "startLine": 57,
        "startChar": 2,
        "endLine": 57,
        "endChar": 8
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31fc87ae_9b6fec13",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cadbae13_3dd4edc6",
      "range": {
        "startLine": 57,
        "startChar": 2,
        "endLine": 57,
        "endChar": 8
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c27a063b_c0253746",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 58,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "should we add a TODO to encode delta timestamps instead? (Or a comment why we don\u0027t want to)",
      "range": {
        "startLine": 58,
        "startChar": 21,
        "endLine": 58,
        "endChar": 42
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71738d78_998a8ef8",
        "filename": "common/py_trace_event/py_trace_event/trace_event_impl/perfetto_trace_writer.py",
        "patchSetId": 6
      },
      "lineNbr": 58,
      "author": {
        "id": 1328067
      },
      "writtenOn": "2019-03-21T11:03:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c27a063b_c0253746",
      "range": {
        "startLine": 58,
        "startChar": 21,
        "endLine": 58,
        "endChar": 42
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3aba7749_ed2d567b",
        "filename": "telemetry/telemetry/internal/platform/tracing_agent/telemetry_tracing_agent.py",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "nit: TODO(khokhlov)\n\nDo we really want to support parsing proto though? I thought we were going to use the trace processor for this, and only in the metrics part of the pipeline?",
      "range": {
        "startLine": 82,
        "startChar": 12,
        "endLine": 82,
        "endChar": 17
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef1adf67_28df720e",
        "filename": "telemetry/telemetry/internal/platform/tracing_agent/telemetry_tracing_agent.py",
        "patchSetId": 6
      },
      "lineNbr": 82,
      "author": {
        "id": 1123010
      },
      "writtenOn": "2019-03-21T10:35:02Z",
      "side": 1,
      "message": "No, we don\u0027t want this. Instead the agent should just write the extra metadata and clock sync info (below) to the same proto output where all events were written.\n\nI\u0027m also planning to rewrite this, so even in the json case we just write and never read. For now you can leave out these Telemetry changes, and just focus on getting py_trace_event right.",
      "parentUuid": "3aba7749_ed2d567b",
      "range": {
        "startLine": 82,
        "startChar": 12,
        "endLine": 82,
        "endChar": 17
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2f81cce_23a4ad24",
        "filename": "telemetry/telemetry/internal/platform/tracing_agent/telemetry_tracing_agent.py",
        "patchSetId": 6
      },
      "lineNbr": 97,
      "author": {
        "id": 1173914
      },
      "writtenOn": "2019-03-19T11:43:47Z",
      "side": 1,
      "message": "I wonder if we should record the format of traceEvents. We can\u0027t convert this to json anymore, since there is binary data in the string - do we need to check and avoid doing that in other TraceDataBuilders?",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 32
      },
      "revId": "f310d9205a43a879cfb4792d1b87f6457d2c94d1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}