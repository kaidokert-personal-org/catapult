{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2a1078d8_552c292a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1518167
      },
      "writtenOn": "2023-04-17T15:06:01Z",
      "side": 1,
      "message": "Hi. I changed skia_perf_upload to be a handler and created a queue for it, so we could have asynchronous writes. Please take a look.",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8aa1825a_990d8758",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1556122
      },
      "writtenOn": "2023-04-17T16:53:59Z",
      "side": 1,
      "message": "Currently, Cloud Monitoring allows one write every 5 seconds for any\nunique tuple (metric_name, metric_label_value_1, metric_label_value_2, â€¦).\nTo avoid being throttled by Cloud Monitoring, you may add a UUID label_value to\nmake the tuple unique.\nhttps://cloud.google.com/monitoring/quotas\n\nFor example:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/catapult/dashboard/dashboard/common/cloud_metric.py;l\u003d229-236",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c99c8071_d8630caa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1518167
      },
      "writtenOn": "2023-04-17T21:22:46Z",
      "side": 1,
      "message": "Done. I also added a @cloud_metric.APIMetric decorator to SkiaPerfUploadPost.",
      "parentUuid": "8aa1825a_990d8758",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f62bd56_57a40b0e",
        "filename": "dashboard/dashboard/common/cloud_metric.py",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1556122
      },
      "writtenOn": "2023-04-17T16:54:58Z",
      "side": 1,
      "message": "you may have to add an UUID here to avoid throttling by Cloud Monitoring API.",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e4a1441_ab64e54e",
        "filename": "dashboard/dashboard/common/cloud_metric.py",
        "patchSetId": 7
      },
      "lineNbr": 63,
      "author": {
        "id": 1518167
      },
      "writtenOn": "2023-04-17T21:22:46Z",
      "side": 1,
      "message": "Done. Like this, right?",
      "parentUuid": "8f62bd56_57a40b0e",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f81ccc03_89b3801d",
        "filename": "dashboard/dashboard/dispatcher.py",
        "patchSetId": 7
      },
      "lineNbr": 285,
      "author": {
        "id": 1556122
      },
      "writtenOn": "2023-04-17T16:53:59Z",
      "side": 1,
      "message": "Like the idea to setup task queue + API to handle the skia perf upload!\n\nIs this a private API?",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7bcd4856_6e4cf646",
        "filename": "dashboard/dashboard/dispatcher.py",
        "patchSetId": 7
      },
      "lineNbr": 285,
      "author": {
        "id": 1518167
      },
      "writtenOn": "2023-04-17T21:22:46Z",
      "side": 1,
      "message": "Thanks for bringing this up. It wasn\u0027t private. I added a check to the handler so that only admins can use it.",
      "parentUuid": "f81ccc03_89b3801d",
      "revId": "062ab9f7c17fc63458199f0664bc58f2b4a06ead",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}