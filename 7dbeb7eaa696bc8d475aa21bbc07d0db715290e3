{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "84cfb0ff_ef9c2674",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1338159
      },
      "writtenOn": "2022-02-15T19:49:18Z",
      "side": 1,
      "message": "Hey Nate, can you help give it a check?",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f3c5aa2_5fcd225f",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2022-02-11T17:49:57Z",
      "side": 1,
      "message": "I\u0027d expect this to be a failure. ie: the user is trying to replace the wrong package. Shouldn\u0027t we return an error in that case?",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2206ebb1_31c94eba",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1338159
      },
      "writtenOn": "2022-02-11T22:16:30Z",
      "side": 1,
      "message": "When testing system apps like system webview shell, the package name can be changed to a different one via GN arg. However, for for system webview shell, its package name is hardcoded in [gn_isolate_map.pyl](https://source.chromium.org/chromium/chromium/src/+/main:testing/buildbot/gn_isolate_map.pyl;drc\u003dcc7506bf1718aab6e02ff93b2e8860ae9bfb022c;l\u003d1694).\n\nIn this case, I think it is reasonable to just skip the replacement, instead of erroring out.\n\nWDYT?",
      "parentUuid": "0f3c5aa2_5fcd225f",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0b271d6_8e3e33fe",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2022-02-12T00:59:41Z",
      "side": 1,
      "message": "I think nate would have more context here to say what the right approach is.",
      "parentUuid": "2206ebb1_31c94eba",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33115dfe_66215dc4",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1167294
      },
      "writtenOn": "2022-02-16T20:43:05Z",
      "side": 1,
      "message": "It seems like a better approach would be to move this check up to the call site, with pseudocode like:\n\n```\nif IsSystemApp(replacement_package.package_name):\n  ReplaceSystemApp(replacement_package)\nelse:\n  Install(replacement_package)\n```\n\nIs there a reason this needs to be done at this level instead?",
      "parentUuid": "d0b271d6_8e3e33fe",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ffdac8b_5c3cb886",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1338159
      },
      "writtenOn": "2022-02-16T21:32:32Z",
      "side": 1,
      "message": "Oh, wait. I put a wrong code here. If there is a mismatch, ReplaceSystemApp should not relocate the system app, but still install the APK. I will upload a new patch.\n\nAs ReplaceSystemApp accepts a package_name and the replace APK as the parameters, there is always a potential mismatch issue so I think it makes more sense to put it here.\nMaybe a better way is to just retrieve the package name from APK, and then follow the pseudocode above?",
      "parentUuid": "33115dfe_66215dc4",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "044509b4_471d624c",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1167294
      },
      "writtenOn": "2022-02-16T22:44:28Z",
      "side": 1,
      "message": "Yeah, I think it would make more sense to remove the package_name arg from this method.",
      "parentUuid": "3ffdac8b_5c3cb886",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef6fc296_2ada99c5",
        "filename": "devil/devil/android/tools/system_app.py",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1338159
      },
      "writtenOn": "2022-02-16T23:48:20Z",
      "side": 1,
      "message": "Updated the CL to prepare for the package_name removal. Will send follow-ups, as described in the commit message.",
      "parentUuid": "044509b4_471d624c",
      "revId": "7dbeb7eaa696bc8d475aa21bbc07d0db715290e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}